{% extends 'base.html' %}
{% include 'base.html' %}
{% block content %}
{% load static %}
    <!-- Data Name that came from backend -->
    <h1>{{table_name}}</h1> 
    <br>
    <h3>Market Stats</h3>
    <!-- Section for market statistics -->
    <section>
    <!-- Save list of keys in backed -->
    {% for key, value in data.items %}
        <div>
            <small>{{key}}</small>
            <!-- https://stackoverflow.com/questions/25675569/how-to-access-properties-of-referenced-objects-in-jinja2-templates-google-app-e -->
            <p>{{value}}</p> 
        </div>
    {% endfor %}
    </section>
    <!-- Situation about currency this week -->
    <div>
        <!--  -->
        <h3>{{table_name}} in last days</h3>
        <!-- Property from coinbase object -->
        <p>In last days value of {{table_name}} changed about {{situation_message}}%</p>
    </div>
    <br>
    <!-- Section for data preview -->
    <div class="table-container">
        <table>
            <thead>
                <tr>
                {% for header_name in table_keys %}
                    <th>{{header_name}}</th>
                {% endfor %}
                </tr>
            </thead>
            <tbody>
                {% for dict in table_values %}
                    <tr>
                        {% for key, value in dict.items %}
                            <td>{{value}}</td>
                        {% endfor %}
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

<div class="responsive-plot">
    {% autoescape off %}
        {{ graph }}
            
    {% endautoescape %} 
    </div>
    <script src="" async defer></script>

    <!-- Section for calculator -->
    <div>
        <h1>Calculator</h1>
        <div>
            <form action="" method="post">
                <!-- Sending authorization token -->
                {% csrf_token %} 
                {{form}}
            <input name="form" type="submit" value="Oblicz"/>
            </form>
            {% if calc_value %}
                <p>{{calc_value}}</p>
            {% endif %}
        </div>
    </div>
    <!-- Section for about -->
    <div>
        <!--  -->
        <h3>About</h3>
        <!-- Property from coinbase object -->
        <p>{{obj.description}}</p>
        <!-- Resources --> 
        <h5>Resources</h5> // TODO mapping links
        <a href="#"></a>
        <a href="#"></a>
    </div>

{% endblock %}